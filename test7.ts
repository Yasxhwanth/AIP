import 'dotenv/config'; import { Pool } from 'pg'; import { PrismaPg } from '@prisma/adapter-pg'; import { PrismaClient } from './src/generated/prisma/client'; const pool = new Pool({ connectionString: process.env.DATABASE_URL }); const adapter = new PrismaPg(pool); const prisma = new PrismaClient({ adapter }); async function main() { try { await prisma.entityType.create({ data: { name: 'Asset', version: 1, attributes: { create: [{ name: 'temperature', dataType: 'number', required: true }, { name: 'status', dataType: 'string', required: true }] } }, include: { attributes: true } }); } catch (err) { require('fs').writeFileSync('err8.txt', JSON.stringify({ code: err.code, meta: err.meta, name: err.name }, null, 2)); } } main();
